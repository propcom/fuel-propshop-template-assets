(function(d,i){function h(c,g){for(var a=0,b=c.length,f=[];a<b;a++)f[a]=g(c[a],a);return f}function j(c){return c}function b(c,g){var e=this,d=i,g=g||{};void 0!==c&&("string"===typeof c?(g.selector=c,c=void 0):"undefined"===typeof c.length&&(g=c,c=void 0));this.imagesOffScreen=[];this.viewportHeight=d.documentElement.clientHeight;this.selector=g.selector||".js-image-load";this.className=g.className||"image-replace";this.gif=d.createElement("img");this.gif.src="data:image/gif;base64,R0lGODlhEAAJAIAAAP///wAAACH5BAEAAAAALAAAAAAQAAkAAAIKhI+py+0Po5yUFQA7";
this.gif.alt="";this.scrollDelay=g.scrollDelay||250;this.onResize=g.hasOwnProperty("onResize")?g.onResize:!0;this.lazyload=g.hasOwnProperty("lazyload")?g.lazyload:!1;this.scrolled=!1;this.availablePixelRatios=g.availablePixelRatios||[1,2];this.availableWidths=g.availableWidths||k;this.onImagesReplaced=g.onImagesReplaced||function(){};this.widthsMap={};this.refreshPixelRatio();this.widthInterpolator=g.widthInterpolator||j;"function"!==typeof this.availableWidths&&("number"===typeof this.availableWidths.length?
this.widthsMap=b.createWidthsMap(this.availableWidths,this.widthInterpolator):(this.widthsMap=this.availableWidths,this.availableWidths=a(this.availableWidths)),this.availableWidths=this.availableWidths.sort(function(c,g){return c-g}));c?(this.divs=h(c,j),this.selector=null):this.divs=h(d.querySelectorAll(this.selector),j);this.changeDivsToEmptyImages();f(function(){e.init()})}var k,a,f,e;f=d.requestAnimationFrame||d.mozRequestAnimationFrame||d.webkitRequestAnimationFrame||function(c){d.setTimeout(c,
1E3/60)};e=i.addEventListener?function(c,g,a){return c.addEventListener(g,a,!1)}:function(c,g,a){return c.attachEvent("on"+g,a)};k=[96,130,165,200,235,270,304,340,375,410,445,485,520,555,590,625,660,695,736];a="function"===typeof Object.keys?Object.keys:function(c){var g=[],a;for(a in c)g.push(a);return g};b.prototype.updateDivs=function(){var c=this;h(i.querySelectorAll(this.selector),function(a){c.divs.push(a)});this.changeDivsToEmptyImages();f(function(){c.init()})};b.prototype.scrollCheck=function(){this.scrolled&&
(this.imagesOffScreen.length||d.clearInterval(this.interval),this.divs=this.imagesOffScreen.slice(0),this.imagesOffScreen.length=0,this.changeDivsToEmptyImages(),this.scrolled=!1)};b.prototype.init=function(){this.initialized=!0;this.checkImagesNeedReplacing(this.divs);this.onResize&&this.registerResizeEvent();this.lazyload&&this.registerScrollEvent()};b.prototype.createGif=function(c){if(c.className.match(RegExp("(^| )"+this.className+"( |$)")))return c;var a=this.gif.cloneNode(!1);a.width=c.getAttribute("data-width");
a.height=c.getAttribute("data-height");a.className=(c.getAttribute("data-class")?c.getAttribute("data-class")+" ":"")+this.className;c.getAttribute("data-zoom-image")&&a.setAttribute("data-zoom-image",c.getAttribute("data-zoom-image"));a.setAttribute("data-src",c.getAttribute("data-src"));a.setAttribute("alt",c.getAttribute("data-alt")||this.gif.alt);c.parentNode.replaceChild(a,c);return a};b.prototype.changeDivsToEmptyImages=function(){var c=this;h(this.divs,function(a,f){c.lazyload?c.isThisElementOnScreen(a)?
c.divs[f]=c.createGif(a):c.imagesOffScreen.push(a):c.divs[f]=c.createGif(a)});this.initialized&&this.checkImagesNeedReplacing(this.divs)};b.prototype.isThisElementOnScreen=function(c){var a=b.getPageOffset(),f=0;if(c.offsetParent){do f+=c.offsetTop;while(c=c.offsetParent)}return f<this.viewportHeight+a?!0:!1};b.prototype.checkImagesNeedReplacing=function(c){var a=this;this.isResizing||(this.isResizing=!0,this.refreshPixelRatio(),h(c,function(c){a.replaceImagesBasedOnScreenDimensions(c)}),this.isResizing=
!1,this.onImagesReplaced(c))};b.prototype.replaceImagesBasedOnScreenDimensions=function(c){var a;a="function"===typeof this.availableWidths?this.availableWidths(c):this.determineAppropriateResolution(c);a=d.getComputedStyle?0===a||"hidden"===d.getComputedStyle(c,null).getPropertyValue("visibility")?this.gif.src:this.changeImageSrcToUseNewImageDimensions(c.getAttribute("data-src"),a):this.changeImageSrcToUseNewImageDimensions(c.getAttribute("data-src"),a);c.src=a};b.prototype.determineAppropriateResolution=
function(a){return 0===a.clientWidth?b.getClosestValue(a.clientWidth,this.availableWidths):b.getClosestValue(i.body.clientWidth,this.availableWidths)};b.prototype.refreshPixelRatio=function(){this.devicePixelRatio=b.getClosestValue(b.getPixelRatio(),this.availablePixelRatios)};b.prototype.changeImageSrcToUseNewImageDimensions=function(a,f){return a.replace(/{width}/g,b.transforms.width(f,this.widthsMap)).replace(/{pixel_ratio}/g,b.transforms.pixelRatio(this.devicePixelRatio))};b.getPixelRatio=function(a){return(a||
d).devicePixelRatio||1};b.createWidthsMap=function(a,f){for(var b={},e=a.length;e--;)b[a[e]]=f(a[e]);return b};b.transforms={pixelRatio:function(a){return 1===a?"":"-"+a+"x"},width:function(a,f){return f[a]||a}};b.getClosestValue=function(a,f){for(var b=f.length,e=f[b-1];b--;)a<=f[b]&&(e=f[b]);return e};b.prototype.registerResizeEvent=function(){var a=this;e(d,"resize",function(){a.checkImagesNeedReplacing(a.divs)})};b.prototype.registerScrollEvent=function(){var a=this;this.scrolled=!1;this.interval=
d.setInterval(function(){a.scrollCheck()},a.scrollDelay);e(d,"scroll",function(){a.scrolled=!0})};b.getPageOffsetGenerator=function(a){return a?function(){return d.pageYOffset}:function(){return i.documentElement.scrollTop}};b.getPageOffset=b.getPageOffsetGenerator(Object.prototype.hasOwnProperty.call(d,"pageYOffset"));b.applyEach=h;"object"===typeof module&&"object"===typeof module.exports?module.exports=exports=b:"function"===typeof define&&define.amd?define(function(){return b}):"object"===typeof d&&
(d.Imager=b)})(window,document);
var wrapSelects=function(){var d;if(0<document.getElementsByTagName("select").length&&(d=document.getElementsByTagName("select")))for(var i=function(a){var b;a.options[a.selectedIndex]?b=a.options[a.selectedIndex].innerHTML:b="";a.parentNode.getElementsByTagName("span")[0].innerHTML=b},h=function(a){a.addEventListener?a.addEventListener("change",function(){i(a)}):a.attachEvent("onchange",function(){i.call(a)})},j=d.length-1;0<=j;j--){var b=d[j],k=b.parentNode,a=document.createElement("div");a.classList?
a.classList.add("styled-select"):a.className+="styled-select";a.appendChild(b);b.options[b.selectedIndex]?b.insertAdjacentHTML("afterend",'<span class="styled-select__span">'+b.options[b.selectedIndex].innerHTML+"</span>"):b.insertAdjacentHTML("afterend",'<span class="styled-select__span"></span>');b.classList?b.classList.add("styled-select__select"):b.className+=" styled-select__select";k.appendChild(a);h(b)}};wrapSelects();
(function(){function d(a,b){a.addEventListener?a.addEventListener("blur",b):a.attachEvent("onfocusout",function(){b(a)})}for(var i=document.getElementsByTagName("input"),h=0,j=i.length;h<j;h++)i[h].getAttribute("data-validation")&&d(i[h],function(a){for(var f=a.target||a,a=JSON.parse(f.getAttribute("data-validation")),e=0,c=a.length;e<c;e++){var d;if(d=b[a[e][0]]){d=f;var i=a[e][1],h=b[a[e][0]].rule;d="function"!==typeof h?h.test(d.value):h(d,i);d=!1===d}if(d){a=a[e][0];e=f.parentNode;e.querySelector(".form__validation")?
e.querySelector(".form__validation").innerText=b[a].message:(e=document.createElement("span"),e.classList?e.classList.add("form__validation"):e.className+="form__validation",e.innerText=b[a].message,f.parentNode.appendChild(e));break}else d=f.parentNode,d.querySelector(".form__validation")&&d.removeChild(d.querySelector(".form__validation"))}});var b={required:{rule:/([^\s])/,message:"This field is required"},min_length:{rule:function(a,f){return!a.required&&""===a.value?!0:a.value.length<f[0]?(b.min_length.message=
"This field must contain at least "+f[0]+" characters.",!1):!0},message:"Surname must contain at least 2 characters."},is_email:{rule:/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i,message:"Please type in a valid email address."},real_phone:{rule:/^(?:(\()|(\[)|)(?:(?:00|\+|)[0-9]{1,3})(?:(\))|(\])|)[0-9 \-,\.\(\)\[\]]+(?:(?:e(?:xt?)?\.?|#|x?\.?|\\|\/|\+)[ ]*([0-9]+))?$/i,
message:"Please double check the format of the phone number provided"},match_field:{rule:function(a,f){var d=k(a,"form").querySelector('input[name="'+f[0]+'"]');return a.value!==d.value?(b.match_field.message="This field doesn't match your previous "+f[0],!1):!0},message:"Please type in a valid email address."}},k=function(a,b){return b.toUpperCase()===a.parentNode.nodeName?a.parentNode:k(a.parentNode,b)}})();
document.getElementById("js-ps-billing-form")&&document.getElementById("js-ps-delivery-form")&&function(d){function i(a,b){var e=this;this.$form=d(a);this.prefix=b;this.$form.find(".js-ps-country-code").on("change",function(){e.update_states(d(this).val())});this.$form.find(".js-ps-address-select").on("change",function(){var a=d(this).find("option:selected"),b;(b=a.data("address"))?e.set_values(b):d.ajax("/customer/rest/address.json",{type:"get",data:{id:d(this).val()},dataType:"json",success:function(b){a.data("address",
b);e.set_values(b)}})});this.$form.data("address-form",e)}var h=function(a){var b=document.createEvent("HTMLEvents");b.initEvent("change",!0,!1);a.dispatchEvent(b)};i.prototype={constructor:i,update_states:function(a,b){var e=this;d.ajax("/customer/rest/address_states.json",{type:"get",async:!0,data:{country_code:a},dataType:"json",success:function(a){e.state_select=e.$form.find(".js-ps-state-code");e.state_select.empty();d.each(a,function(a,b){var c=d("<option/>");c.attr("value",a);c.html(b);e.state_select.append(c)});
e.state_select&&(document.createEvent?h(e.state_select.get(0)):e.state_select.get(0).fireEvent("onchange"),"function"===typeof b&&b(e.state_select))}})},set_values:function(a){var b=this,a=d.extend({},a);if(a.country_code){var e=a.state_code;b.$form.find(".js-ps-country-code").val(a.country_code).trigger("change");b.update_states(a.country_code,function(a){e&&(a.val(e),document.createEvent?h(a.get(0)):a.get(0).fireEvent("onchange"))})}else a.state_code&&(document.createEvent?h(b.$form.find(".js-ps-state-code").val(a.state_code).get(0)):
b.$form.find(".js-ps-state-code").val(a.state_code).get(0).fireEvent("onchange"));delete a.country_code;delete a.state_code;d.each(a,function(a,d){var e=b.$form.find('[name="'+b.prefix+a+'"]');e.val(d);e.trigger("change.address-form")})},get_values:function(){var a=this,b={};a.$form.find(":input").each(function(){var e=d(this);b[e.attr("name").replace(a.prefix,"")]=e.val()});return b},couple:function(a){this._couple||(this._couple=a,this._couple.$form.find(":input").on("change.address-form",this._on_couple_change()),
this.set_values(a.get_values()))},_on_couple_change:function(){var a=this;return this._couple_handler=this._couple_handler||function(){var b=d(this).attr("name").replace(a._couple.prefix,""),e=d(this).val(),c={};c[b]=e;a.set_values(c)}},decouple:function(){this._couple&&(this._couple.$form.find(":input").off("change.address-form",this._on_couple_change()),this._couple=null)}};window.AddressForm=i;var j=[];window.AddressForms={register:function(a,b){a instanceof i?j.push(a,b):a.each(function(){j.push(new i(d(this),
b))})}};var b=d("#js-ps-billing-form"),k=d("#js-ps-delivery-form");AddressForms.register(b,"billing_");AddressForms.register(k,"delivery_");d("#js-ps-copy-address").on("change",function(){var a=d(this),f=a.data("from"),a=!!a.is(":checked"),e=function(a,b){a.hasClass("is-hidden")?a.removeClass("is-hidden"):a.addClass("is-hidden");"function"===typeof b&&calback()};"billing"===f?a?e(d("#js-ps-hidden-address"),k.data("address-form").couple(b.data("address-form"))):e(d("#js-ps-hidden-address"),k.data("address-form").decouple()):
a?e(d("#js-ps-hidden-address"),b.data("address-form").couple(k.data("address-form"))):e(d("#js-ps-hidden-address"),b.data("address-form").decouple())}).trigger("change")}(jQuery);$(document).ready(function(){$("#shipping_chk").is(":checked")&&$("#js-shipping-form").hide();$("#shipping_chk").on("click",function(){$(this).is(":checked")?$("#js-shipping-form").hide():$("#js-shipping-form").show()})});
